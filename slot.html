<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slot Machine</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
    <h1>ğŸ° Slot Machine ğŸ°</h1>
    <div class="balance-bar" id="balance"></div>
    <div class="balance-bar" id="jackpot"></div>
</header>

<div class="casino-box">

    <div>
        <span class="slot" id="slot1">â“</span>
        <span class="slot" id="slot2">â“</span>
        <span class="slot" id="slot3">â“</span>
    </div>

    <div>
        <button onclick="setBet(10)">Bet 10</button>
        <button onclick="setBet(25)">Bet 25</button>
        <button onclick="setBet(50)">Bet 50</button>
    </div>

    <button onclick="spin()">SPIN</button>

    <p id="message"></p>

</div>

<a href="index.html" class="menu-btn">â¬… Back to Menu</a>

<audio id="spinSound" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/active_storage/sfx/1994/1994-preview.mp3"></audio>

<script>

let symbols = ["ğŸ’","ğŸ‹","ğŸ””","ğŸ’","â­","7ï¸âƒ£"];
let bet = 10;

if(!localStorage.getItem("balance")){
    localStorage.setItem("balance",500);
}

if(!localStorage.getItem("jackpot")){
    localStorage.setItem("jackpot",1000);
}

updateUI();

function setBet(amount){
    bet = amount;
    document.getElementById("message").innerHTML = "Bet set to " + bet;
}

function spin(){

    let balance = parseInt(localStorage.getItem("balance"));
    let jackpot = parseInt(localStorage.getItem("jackpot"));

    if(balance < bet){
        document.getElementById("message").innerHTML = "âŒ Not enough balance!";
        return;
    }

    balance -= bet;
    jackpot += Math.floor(bet/2);

    document.getElementById("spinSound").play();

    let s1 = randomSymbol();
    let s2 = randomSymbol();
    let s3 = randomSymbol();

    document.getElementById("slot1").innerHTML = s1;
    document.getElementById("slot2").innerHTML = s2;
    document.getElementById("slot3").innerHTML = s3;

    if(s1 === s2 && s2 === s3){

        let winAmount = bet * 5;

        if(s1 === "7ï¸âƒ£"){
            winAmount = jackpot;
            jackpot = 1000;
            document.getElementById("message").innerHTML = "ğŸ’° MEGA JACKPOT!";
        } else {
            document.getElementById("message").innerHTML = "ğŸ‰ You win " + winAmount;
        }

        balance += winAmount;
        document.getElementById("winSound").play();

    } else {
        document.getElementById("message").innerHTML = "Try again!";
    }

    localStorage.setItem("balance", balance);
    localStorage.setItem("jackpot", jackpot);

    updateUI();
}

function randomSymbol(){
    return symbols[Math.floor(Math.random() * symbols.length)];
}

function updateUI(){
    document.getElementById("balance").innerHTML =
        "Balance: " + localStorage.getItem("balance") + " ğŸ’°";

    document.getElementById("jackpot").innerHTML =
        "Jackpot: " + localStorage.getItem("jackpot") + " ğŸ’";
}

</script>

</body>
</html>
